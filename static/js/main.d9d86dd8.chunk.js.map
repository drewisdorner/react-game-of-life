{"version":3,"sources":["utils/windowSize.ts","App.tsx","index.tsx"],"names":["getWindowDimensions","window","width","innerWidth","height","innerHeight","operations","App","useState","windowDimensions","setWindowDimensions","useEffect","handleResize","addEventListener","removeEventListener","useWindowDimensions","Math","floor","numRows","numCols","generateEmptyGrid","rows","i","push","Array","from","grid","setGrid","running","setRunning","runningRef","useRef","current","runSimulation","useCallback","console","log","g","produce","gridCopy","k","neighbors","forEach","x","y","newI","newK","setTimeout","onClick","random","style","display","gridTemplateColumns","map","col","key","newGrid","backgroundColor","undefined","border","ReactDOM","render","document","getElementById"],"mappings":"iMAEA,SAASA,IAAuB,IAAD,EACwBC,OACnD,MAAO,CACHC,MAHuB,EACnBC,WAGJC,OAJuB,EACAC,a,UCEzBC,EAAa,CACjB,CAAC,EAAG,GACJ,CAAC,GAAI,GACL,CAAC,GAAI,GACL,EAAE,EAAG,GACL,CAAC,EAAG,GACJ,EAAE,GAAI,GACN,CAAC,EAAG,GACJ,EAAE,EAAG,IAkIQC,EA/HO,WAAO,IAAD,EDNb,WAAgC,IAAD,EACMC,mBAC5CR,KAFsC,mBACnCS,EADmC,KACjBC,EADiB,KAc1C,OATAC,qBAAU,WACN,SAASC,IACTF,EAAoBV,KAIpB,OADAC,OAAOY,iBAAiB,SAAUD,GAC3B,kBAAMX,OAAOa,oBAAoB,SAAUF,MACnD,IAEIH,ECNiBM,GAAlBb,EAFkB,EAElBA,MAAOE,EAFW,EAEXA,OAFW,EAINI,oBAAS,WAC3B,OAAOQ,KAAKC,MAAMb,EAAS,OADrBc,EAJkB,sBAONV,oBAAS,WAC3B,OAAOQ,KAAKC,MAAMf,EAAQ,OADpBiB,EAPkB,oBAWpBC,EAAoB,WAExB,IADA,IAAMC,EAAO,GACJC,EAAI,EAAGA,EAAIJ,EAASI,IAC3BD,EAAKE,KAAKC,MAAMC,KAAKD,MAAML,IAAU,kBAAM,MAG7C,OAAOE,GAjBiB,EAoBFb,oBAAS,WAC/B,OAAOY,OArBiB,mBAoBnBM,EApBmB,KAoBbC,EApBa,OAwBInB,oBAAS,GAxBb,mBAwBnBoB,EAxBmB,KAwBVC,EAxBU,KA0BpBC,EAAaC,iBAAOH,GAC1BE,EAAWE,QAAUJ,EAErB,IAAMK,EAAgBC,uBAAY,WAChCC,QAAQC,IAAI,kBACPN,EAAWE,UAIhBL,GAAQ,SAAAU,GAEN,OADAF,QAAQC,IAAI,YACLE,YAAQD,GAAG,SAAAE,GAChB,IAD6B,IAAD,WACnBjB,GACP,IAF0B,eAEjBkB,GACP,IAAIC,EAAY,EAChBnC,EAAWoC,SAAQ,YAAa,IAAD,mBAAVC,EAAU,KAAPC,EAAO,KACvBC,EAAOvB,EAAIqB,EACXG,EAAON,EAAII,EACbC,GAAQ,GAAKA,EAAO3B,GAAW4B,GAAQ,GAAKA,EAAO3B,IACrDsB,GAAaJ,EAAEQ,GAAMC,OAIrBL,EAAY,GAAKA,EAAY,EAC/BF,EAASjB,GAAGkB,GAAK,EACI,IAAZH,EAAEf,GAAGkB,IAA0B,IAAdC,IAC1BF,EAASjB,GAAGkB,GAAK,IAbZA,EAAI,EAAGA,EAAIrB,EAASqB,IAAM,EAA1BA,IADFlB,EAAI,EAAGA,EAAIJ,EAASI,IAAM,EAA1BA,SAqBbyB,WAAWd,EAAe,QACzB,CAACd,EAASD,IAEb,OACE,oCACE,4BACE8B,QAAS,WACPb,QAAQC,IAAI,qBACZP,GAAYD,GACPA,IACHE,EAAWE,SAAU,EACrBC,OAIHL,EAAU,OAAS,SAEtB,4BACEoB,QAAS,WAEP,IADA,IAAM3B,EAAO,GACJC,EAAI,EAAGA,EAAIJ,EAASI,IAC3BD,EAAKE,KACHC,MAAMC,KAAKD,MAAML,IAAU,kBAAOH,KAAKiC,SAAW,GAAM,EAAI,MAIhEtB,EAAQN,KATZ,UAcA,4BACE2B,QAAS,WACPrB,EAAQP,OAFZ,SAOA,yBACE8B,MAAO,CACLC,QAAS,OACTC,oBAAoB,UAAD,OAAYjC,EAAZ,aAGpBO,EAAK2B,KAAI,SAAChC,EAAMC,GAAP,OACRD,EAAKgC,KAAI,SAACC,EAAKd,GAAN,OACP,yBACEe,IAAG,UAAKjC,EAAL,YAAUkB,GACbQ,QAAS,WACP,IAAMQ,EAAUlB,YAAQZ,GAAM,SAAAa,GAC5BA,EAASjB,GAAGkB,GAAKd,EAAKJ,GAAGkB,GAAK,EAAI,KAEpCb,EAAQ6B,IAEVN,MAAO,CACLhD,MAAO,GACPE,OAAQ,GACRqD,gBAAiB/B,EAAKJ,GAAGkB,GAAK,eAAYkB,EAC1CC,OAAQ,oCCjIxBC,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,U","file":"static/js/main.d9d86dd8.chunk.js","sourcesContent":["import { useEffect, useState } from \"react\";\n\nfunction getWindowDimensions() {\n    const { innerWidth: width, innerHeight: height } = window;\n    return {\n        width,\n        height\n    };\n}\n\nexport default function useWindowDimensions() {\n    const [windowDimensions, setWindowDimensions] = useState(\n        getWindowDimensions()\n    );\n\n    useEffect(() => {\n        function handleResize() {\n        setWindowDimensions(getWindowDimensions());\n        }\n\n        window.addEventListener(\"resize\", handleResize);\n        return () => window.removeEventListener(\"resize\", handleResize);\n    }, []);\n\n    return windowDimensions;\n}","import React, { useCallback, useRef, useState } from \"react\";\nimport produce from \"immer\";\nimport useWindowDimensions from \"./utils/windowSize\";\nimport './App.css';\n\nconst operations = [\n  [0, 1],\n  [0, -1],\n  [1, -1],\n  [-1, 1],\n  [1, 1],\n  [-1, -1],\n  [1, 0],\n  [-1, 0]\n];\n\nconst App: React.FC = () => {\n\n  const { width, height } = useWindowDimensions();\n\n  const [ numRows ] = useState(() => {\n    return Math.floor(height / 23)\n  });\n  const [ numCols ] = useState(() => {\n    return Math.floor(width / 21)\n  });\n\n  const generateEmptyGrid = () => {\n    const rows = [];\n    for (let i = 0; i < numRows; i++) {\n      rows.push(Array.from(Array(numCols), () => 0));    \n    }\n\n    return rows;\n  }\n\n  const [grid, setGrid] = useState(() => {\n    return generateEmptyGrid();\n  });\n\n  const [running, setRunning] = useState(false);\n\n  const runningRef = useRef(running);\n  runningRef.current = running;\n\n  const runSimulation = useCallback(() => {\n    console.log(\"runSimulation!\")\n    if (!runningRef.current) {\n      return;\n    }\n\n    setGrid(g => {\n      console.log(\"setGrid!\")\n      return produce(g, gridCopy => {\n        for (let i = 0; i < numRows; i++) {\n          for (let k = 0; k < numCols; k++) {\n            let neighbors = 0;\n            operations.forEach(([x, y]) => {\n              const newI = i + x;\n              const newK = k + y;\n              if (newI >= 0 && newI < numRows && newK >= 0 && newK < numCols) {\n                neighbors += g[newI][newK];\n              }\n            });\n\n            if (neighbors < 2 || neighbors > 3) {\n              gridCopy[i][k] = 0;\n            } else if (g[i][k] === 0 && neighbors === 3) {\n              gridCopy[i][k] = 1;\n            }\n          }          \n        }\n      });\n    });\n\n    setTimeout(runSimulation, 100);\n  }, [numCols, numRows]);\n\n  return (\n    <>\n      <button\n        onClick={() => {\n          console.log(\"start/stop click!\")\n          setRunning(!running);\n          if (!running) {\n            runningRef.current = true;\n            runSimulation();\n          }\n        }}\n      >\n        {running ? \"stop\" : \"start\"}\n      </button>\n      <button\n        onClick={() => {\n          const rows = [];\n          for (let i = 0; i < numRows; i++) {\n            rows.push(\n              Array.from(Array(numCols), () => (Math.random() > 0.7 ? 1 : 0))\n            );\n          }\n\n          setGrid(rows);\n        }}\n      >\n        random\n      </button>\n      <button\n        onClick={() => {\n          setGrid(generateEmptyGrid());\n        }}\n      >\n        clear\n      </button>\n      <div\n        style={{\n          display: \"grid\",\n          gridTemplateColumns: `repeat(${numCols}, 20px)`\n        }}\n      >\n        {grid.map((rows, i) =>\n          rows.map((col, k) => (\n            <div\n              key={`${i}-${k}`}\n              onClick={() => {\n                const newGrid = produce(grid, gridCopy => {\n                  gridCopy[i][k] = grid[i][k] ? 0 : 1;\n                });\n                setGrid(newGrid);\n              }}\n              style={{\n                width: 20,\n                height: 20,\n                backgroundColor: grid[i][k] ? \"#732d91\" : undefined,\n                border: \"solid 0.5px lightgray\"\n              }}\n            />\n          ))\n        )}\n      </div>\n    </>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}